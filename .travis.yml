language: java

cache:
  directories:
    - $HOME/.m2

jdk:
  - openjdk11

install:
  - wget https://raw.githubusercontent.com/eFaps/Utils/master/settings/settings.xml -O mySettings.xml
  - mvn install -s mySettings.xml -DskipTests=true -B -V

script:
  - mvn test -s mySettings.xml -B
  - mvn cobertura:cobertura -s mySettings.xml

after_success:
  - "[[ $TRAVIS_BRANCH == \"master\" || $TRAVIS_BRANCH == \"java-11\" ]] && [[ ${TRAVIS_PULL_REQUEST} == 'false' ]] && [[ ${TRAVIS_TAG} == '' ]] && mvn deploy -DskipTests -s mySettings.xml"
  - bash <(curl -s https://codecov.io/bash)